{"version":3,"sources":["lib/umd/immutableJSONPatch.js"],"names":["global","factory","exports","module","define","amd","globalThis","self","immutableJSONPatch","this","isJSONArray","value","Array","isArray","isJSONObject","undefined","constructor","name","strictEqual","a","b","initial","array","slice","length","isObjectOrArray","shallowClone","copy","Object","getOwnPropertySymbols","forEach","symbol","applyProp","object","key","updatedObject","getIn","path","let","i","Number","parseInt","setIn","createPath","arguments","updatedValue","newObject","IS_INTEGER_REGEX","test","Error","updateIn","transform","deleteIn","splice","insertAt","document","parentPath","index","items","updatedItems","TypeError","JSON","stringify","existsIn","parseJSONPointer","pointer","split","shift","map","p","replace","compileJSONPointer","compileJSONPointerProp","join","pathProp","String","operations","options","updatedDocument","operation","validateJSONPatchOperation","includes","op","from","before","result","json","previousDocument","parsePath","isArrayItem","parseFrom","removedJson","actualValue","after","parent","concat","fromPointer","revertReplace","revertRemove","revertAdd","appendToJSONPointer","isJSONPatchAdd","isJSONPatchCopy","isJSONPatchMove","isJSONPatchOperation","isJSONPatchRemove","isJSONPatchReplace","isJSONPatchTest","revertJSONPatch","allRevertOperations","revertOperations","array1","array2","isEqual","move","updatedJson","res","startsWithJSONPointer","searchPointer","startsWith","callback","updated1","updated2","hasOwnProperty","call"],"mappings":"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"}